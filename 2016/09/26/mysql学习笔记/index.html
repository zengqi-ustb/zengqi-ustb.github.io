
 <!DOCTYPE HTML>
<html lang="default">
<head>
  <meta charset="UTF-8">
  
    <title>mysql学习笔记 | 曾先生&#39;s Blog</title>
    <meta name="viewport" content="width=device-width, initial-scale=1,user-scalable=no">
    
    <meta name="author" content="曾奇">
    

    
    <meta name="description" content="概述数据库：

数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。所以，现在我们使用关系型数据库管理系统（RDBMS）来存储和管理的大数据量。
RDBMS（关系型数据库）术语:

冗余：存储两倍数据，冗余可以使系统速度更快。主键：主键">
<meta property="og:type" content="article">
<meta property="og:title" content="mysql学习笔记">
<meta property="og:url" content="http://yoursite.com/2016/09/26/mysql学习笔记/index.html">
<meta property="og:site_name" content="曾先生's Blog">
<meta property="og:description" content="概述数据库：

数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。所以，现在我们使用关系型数据库管理系统（RDBMS）来存储和管理的大数据量。
RDBMS（关系型数据库）术语:

冗余：存储两倍数据，冗余可以使系统速度更快。主键：主键">
<meta property="og:image" content="http://img.blog.csdn.net/20160926221911608">
<meta property="og:image" content="http://img.blog.csdn.net/20160926222130455">
<meta property="og:image" content="http://img.blog.csdn.net/20160926222238770">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/03/img_innerjoin.gif">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/03/img_leftjoin.gif">
<meta property="og:image" content="http://www.runoob.com/wp-content/uploads/2014/03/img_rightjoin.gif">
<meta property="og:image" content="http://img.blog.csdn.net/20160927143112662">
<meta property="og:updated_time" content="2016-10-04T16:18:19.894Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="mysql学习笔记">
<meta name="twitter:description" content="概述数据库：

数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。所以，现在我们使用关系型数据库管理系统（RDBMS）来存储和管理的大数据量。
RDBMS（关系型数据库）术语:

冗余：存储两倍数据，冗余可以使系统速度更快。主键：主键">
<meta name="twitter:image" content="http://img.blog.csdn.net/20160926221911608">

    
    <link rel="alternative" href="/atom.xml" title="曾先生&#39;s Blog" type="application/atom+xml">
    
    
    <link rel="icon" href="/img/favicon.ico">
    
    
    <link rel="apple-touch-icon" href="/img/jacman.jpg">
    <link rel="apple-touch-icon-precomposed" href="/img/jacman.jpg">
    
    <link rel="stylesheet" href="/css/style.css">
</head>

  <body>
    <header>
      
<div>
		
			<div id="imglogo">
				<a href="/"><img src="/img/logo.png" alt="曾先生&#39;s Blog" title="曾先生&#39;s Blog"/></a>
			</div>
			
			<div id="textlogo">
				<h1 class="site-name"><a href="/" title="曾先生&#39;s Blog">曾先生&#39;s Blog</a></h1>
				<h2 class="blog-motto">飞面神教四川担担面教区主教</h2>
			</div>
			<div class="navbar"><a class="navbutton navmobile" href="#" title="Menu">
			</a></div>
			<nav class="animated">
				<ul>
					<ul>
					 
						<li><a href="/">首页</a></li>
					
						<li><a href="/archives">归档</a></li>
					
						<li><a href="/about">关于我</a></li>
					
					<li>
 					
					<form class="search" action="//google.com/search" method="get" accept-charset="utf-8">
						<label>Search</label>
						<input type="search" id="search" name="q" autocomplete="off" maxlength="20" placeholder="Search" />
						<input type="hidden" name="q" value="site:yoursite.com">
					</form>
					
					</li>
				</ul>
			</nav>			
</div>
    </header>
    <div id="container">
      <div id="main" class="post" itemscope itemprop="blogPost">
  
	<article itemprop="articleBody"> 
		<header class="article-info clearfix">
  <h1 itemprop="name">
    
      <a href="/2016/09/26/mysql学习笔记/" title="mysql学习笔记" itemprop="url">mysql学习笔记</a>
  </h1>
  <p class="article-author">By
       
		<a href="/about" title="曾奇" target="_blank" itemprop="author">曾奇</a>
		
  <p class="article-time">
    <time datetime="2016-09-26T04:23:39.000Z" itemprop="datePublished"> Published 2016-09-26</time>
    
  </p>
</header>
	<div class="article-content">
		
		<div id="toc" class="toc-article">
			<strong class="toc-title">Contents</strong>
		
			<ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#概述"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.1.</span> <span class="toc-text">数据库：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.</span> <span class="toc-text">RDBMS（关系型数据库）术语:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql安装"><span class="toc-number">2.</span> <span class="toc-text">mysql安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">2.1.</span> <span class="toc-text">验证Mysql安装：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-管理"><span class="toc-number">3.</span> <span class="toc-text">MySQL 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.1.</span> <span class="toc-text">启动及关闭 MySQL 服务器：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.</span> <span class="toc-text">MySQL 用户设置：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.3.</span> <span class="toc-text">管理MySQL的命令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-PHP-脚本连接-MySQL"><span class="toc-number">4.</span> <span class="toc-text">使用 PHP 脚本连接 MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-数据类型"><span class="toc-number">5.</span> <span class="toc-text">MySQL 数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-创建数据表"><span class="toc-number">6.</span> <span class="toc-text">MySQL 创建数据表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-插入数据"><span class="toc-number">7.</span> <span class="toc-text">MySQL 插入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-查询数据"><span class="toc-number">8.</span> <span class="toc-text">MySQL 查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">8.1.</span> <span class="toc-text">内存释放：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">8.2.</span> <span class="toc-text">where子句：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-UPDATE-查询"><span class="toc-number">9.</span> <span class="toc-text">MySQL UPDATE 查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-LIKE-子句"><span class="toc-number">10.</span> <span class="toc-text">MySQL LIKE 子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-排序"><span class="toc-number">11.</span> <span class="toc-text">MySQL 排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-GROUP-BY-语句"><span class="toc-number">12.</span> <span class="toc-text">MySQL GROUP BY 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql-连接的使用"><span class="toc-number">13.</span> <span class="toc-text">Mysql 连接的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-NULL-值处理"><span class="toc-number">14.</span> <span class="toc-text">MySQL NULL 值处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-正则表达式"><span class="toc-number">15.</span> <span class="toc-text">MySQL 正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-事务"><span class="toc-number">16.</span> <span class="toc-text">MySQL 事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-ALTER命令"><span class="toc-number">17.</span> <span class="toc-text">MySQL ALTER命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-索引"><span class="toc-number">18.</span> <span class="toc-text">MySQL 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.1.</span> <span class="toc-text">普通索引：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.2.</span> <span class="toc-text">唯一索引：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.3.</span> <span class="toc-text">使用ALTER 命令添加和删除索引：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.4.</span> <span class="toc-text">使用 ALTER 命令添加和删除主键：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.5.</span> <span class="toc-text">防止表中出现重复数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.6.</span> <span class="toc-text">过滤重复数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.7.</span> <span class="toc-text">删除重复数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-及-SQL-注入"><span class="toc-number">19.</span> <span class="toc-text">MySQL 及 SQL 注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-导出数据"><span class="toc-number">20.</span> <span class="toc-text">MySQL 导出数据</span></a></li></ol>
		
		</div>
		
		<h2 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h2><h3>数据库：</h3>

<p>数据库（Database）是按照数据结构来组织、存储和管理数据的仓库，<br>每个数据库都有一个或多个不同的API用于创建，访问，管理，搜索和复制所保存的数据。<br>我们也可以将数据存储在文件中，但是在文件中读写数据速度相对较慢。所以，现在我们使用关系型数据库管理系统（RDBMS）来存储和管理的<strong>大数据量</strong>。</p>
<h3>RDBMS（关系型数据库）术语:</h3>

<p><strong>冗余</strong>：存储两倍数据，冗余可以使系统速度更快。<br><strong>主键</strong>：主键是唯一的。<strong>一个数据表中只能包含一个主键</strong>。你可以使用主键来查询数据。<br><strong>外键</strong>：外键用于<strong>关联两个表</strong>。<br><strong>复合键</strong>：复合键（组合键）<strong>将多个列作为一个索引键</strong>，一般用于复合索引。<br><strong>索引</strong>：使用索引可快速访问数据库表中的特定信息。索引是对数据库表中一列或多列的值进行排序的一种结构。<strong>类似于书籍的目录</strong>。<br><strong>参照完整性</strong>: 参照的完整性要求关系中不允许引用不存在的实体。与实体完整性是关系模型必须满足的完整性约束条件，<strong>目的是保证数据的一致性</strong>。</p>
<hr>
<h2 id="mysql安装"><a href="#mysql安装" class="headerlink" title="mysql安装"></a>mysql安装</h2><h3>验证Mysql安装：</h3>

<p>使用 <strong>mysqladmin</strong> 工具来获取服务器状态：<br>使用 mysqladmin 命令俩检查服务器的版本,在linux上该二进制文件位于 /usr/bin on linux ，在window上该二进制文件位于C:\mysql\bin 。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@host]# mysqladmin --version</span><br></pre></td></tr></table></figure>
<p>Mysql安装成功后，默认的root用户密码为空，你可以使用以下命令来创建root用户的密码：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@host]# mysqladmin -u root password &quot;new_password&quot;;</span><br></pre></td></tr></table></figure>
<p>现在你可以通过以下命令来连接到Mysql服务器：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@host]# mysql -u root -p</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="MySQL-管理"><a href="#MySQL-管理" class="headerlink" title="MySQL 管理"></a>MySQL 管理</h2><h3>启动及关闭 MySQL 服务器：</h3>

<p>通过以下命令来检查MySQL服务器是否启动：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ps -ef | grep mysqld</span><br></pre></td></tr></table></figure>
<p>使用以下命令来启动mysql服务器:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">root@host# cd /usr/bin</span><br><span class="line">./mysqld_safe &amp;</span><br></pre></td></tr></table></figure>
<p>关闭目前运行的 MySQL 服务器:</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">root@host# cd /usr/bin</span><br><span class="line">./mysqladmin -u root -p shutdown</span><br><span class="line">Enter password: ******</span><br></pre></td></tr></table></figure>
<h3>MySQL 用户设置：</h3>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">root@host# mysql -u root -p</span><br><span class="line">Enter password:*******</span><br><span class="line">mysql&gt; use mysql;</span><br><span class="line">Database changed</span><br><span class="line"></span><br><span class="line">mysql&gt; INSERT INTO user </span><br><span class="line">          (host, user, password, </span><br><span class="line">           select_priv, insert_priv, update_priv) </span><br><span class="line">           VALUES (&apos;localhost&apos;, &apos;guest&apos;, </span><br><span class="line">           PASSWORD(&apos;guest123&apos;), &apos;Y&apos;, &apos;Y&apos;, &apos;Y&apos;);</span><br><span class="line">Query OK, 1 row affected (0.20 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; FLUSH PRIVILEGES;</span><br><span class="line">Query OK, 1 row affected (0.01 sec)</span><br><span class="line"></span><br><span class="line">mysql&gt; SELECT host, user, password FROM user WHERE user = &apos;guest&apos;;</span><br><span class="line">+-----------+---------+------------------+</span><br><span class="line">| host      | user    | password         |</span><br><span class="line">+-----------+---------+------------------+</span><br><span class="line">| localhost | guest | 6f8c114b58f2ce9e |</span><br><span class="line">+-----------+---------+------------------+</span><br><span class="line">1 row in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：在注意需要执行 FLUSH PRIVILEGES 语句。 这个命令执行后会重新载入授权表。</p>
<h3>管理MySQL的命令：</h3>

<p><strong>USE 数据库名 :</strong>选择要操作的Mysql数据库，<strong>使用该命令后所有Mysql命令都只针对该数据库</strong>。</p>
<p><strong>SHOW COLUMNS FROM 数据表:</strong>显示数据表的属性，属性类型，主键信息 ，是否为 NULL，默认值等其他信息。</p>
<p><strong>SHOW INDEX FROM 数据表:</strong>显示数据表的详细索引信息，包括PRIMARY KEY（主键）。</p>
<p><strong>SHOW TABLE STATUS LIKE [FROM db_name] [LIKE ‘pattern’] \G:</strong> 该命令将输出Mysql数据库管理系统的性能及统计信息。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SHOW TABLE STATUS  FROM RUNOOB;   # 显示数据库 RUNOOB 中所有表的信息</span><br><span class="line"></span><br><span class="line">mysql&gt; SHOW TABLE STATUS from RUNOOB LIKE &apos;runoob%&apos;;     # 表名以runoob开头的表的信息</span><br><span class="line">mysql&gt; SHOW TABLE STATUS from RUNOOB LIKE &apos;runoob%&apos;\G;   # 加上 \G，查询结果按列打印</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="使用-PHP-脚本连接-MySQL"><a href="#使用-PHP-脚本连接-MySQL" class="headerlink" title="使用 PHP 脚本连接 MySQL"></a>使用 PHP 脚本连接 MySQL</h2><p>PHP 提供了 mysql_connect() 函数来连接数据库。<br>该函数有5个参数，在成功链接到MySQL后返回连接标识，失败返回 FALSE 。<br>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">connection mysql_connect(server,user,passwd,new_link,client_flag);</span><br></pre></td></tr></table></figure>
<p>你可以使用PHP的 <strong>mysql_close()</strong> 函数来断开与MySQL数据库的链接。<br>该函数只有一个参数为mysql_connect()函数创建连接成功后返回的 MySQL 连接标识符。<br>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bool mysql_close ( resource $link_identifier );</span><br></pre></td></tr></table></figure>
<p><strong>注释</strong>：mysql_close() 不会关闭由 mysql_pconnect() 建立的持久连接。</p>
<hr>
<h2 id="MySQL-数据类型"><a href="#MySQL-数据类型" class="headerlink" title="MySQL 数据类型"></a>MySQL 数据类型</h2><p>MySQL中定义数据字段的类型对你数据库的优化是非常重要的。<br>MySQL支持多种类型，大致可以分为三类：<strong>数值</strong>、<strong>日期/时间</strong>和<strong>字符串(字符)</strong>类型。</p>
<p><strong>数值：</strong><br><img src="http://img.blog.csdn.net/20160926221911608" alt=""></p>
<p><strong>日期和时间类型：</strong><br>每个时间类型有一个<strong>有效值范围</strong>和一个<strong>“零”值</strong>，当指定不合法的MySQL<strong>不能表示的值时使用”零”值</strong>。<br><strong>TIMESTAMP</strong>类型有专有的自动更新特性，将在后面描述。<br><img src="http://img.blog.csdn.net/20160926222130455" alt=""></p>
<p><strong>字符串类型：</strong><br><img src="http://img.blog.csdn.net/20160926222238770" alt=""></p>
<hr>
<h2 id="MySQL-创建数据表"><a href="#MySQL-创建数据表" class="headerlink" title="MySQL 创建数据表"></a>MySQL 创建数据表</h2><p>创建MySQL数据表需要以下信息：<br>1.表名<br>2.表字段名<br>3.定义每个表字段</p>
<p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE table_name (column_name column_type);</span><br></pre></td></tr></table></figure>
<p>例如：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">runoob_tbl(</span><br><span class="line">   runoob_id INT NOT NULL AUTO_INCREMENT,</span><br><span class="line">   runoob_title VARCHAR(100) NOT NULL,</span><br><span class="line">   runoob_author VARCHAR(40) NOT NULL,</span><br><span class="line">   submission_date DATE,</span><br><span class="line">   PRIMARY KEY ( runoob_id )</span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p>解析：<br>1.如果你不想字段为 NULL 可以设置字段的属性为 NOT NULL， 在操作数据库时如果输入该字段的数据为NULL ，<strong>就会报错</strong>。<br>2.AUTO_INCREMENT定义列为自增的属性，<strong>一般用于主键</strong>，数值会自动加1。<br>3.PRIMARY KEY关键字<strong>用于定义列为主键</strong>。 您可以使用多列来定义主键，列间以逗号分隔。</p>
<hr>
<h2 id="MySQL-插入数据"><a href="#MySQL-插入数据" class="headerlink" title="MySQL 插入数据"></a>MySQL 插入数据</h2><p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">INSERT INTO table_name ( field1, field2,...fieldN )</span><br><span class="line">                       VALUES</span><br><span class="line">                       ( value1, value2,...valueN );</span><br></pre></td></tr></table></figure>
<p>如果数据是<strong>字符型</strong>，必须使用单引号或者双引号，如：”value”。</p>
<hr>
<h2 id="MySQL-查询数据"><a href="#MySQL-查询数据" class="headerlink" title="MySQL 查询数据"></a>MySQL 查询数据</h2><p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name,column_name</span><br><span class="line">FROM table_name</span><br><span class="line">[WHERE Clause]</span><br><span class="line">[OFFSET M ][LIMIT N]</span><br></pre></td></tr></table></figure>
<p><strong>补充：</strong><br>1.查询语句中你<strong>可以使用一个或者多个表</strong>，表之间使用逗号(,)分割，并使用WHERE语句来设定查询条件。</p>
<p><strong>使用PHP来获取数据：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$dbhost = &apos;localhost:3036&apos;;</span><br><span class="line">$dbuser = &apos;root&apos;;</span><br><span class="line">$dbpass = &apos;rootpassword&apos;;</span><br><span class="line">$conn = mysql_connect($dbhost, $dbuser, $dbpass);</span><br><span class="line">if(! $conn )</span><br><span class="line">&#123;</span><br><span class="line">  die(&apos;Could not connect: &apos; . mysql_error());</span><br><span class="line">&#125;</span><br><span class="line">$sql = &apos;SELECT runoob_id, runoob_title, </span><br><span class="line">               runoob_author, submission_date</span><br><span class="line">        FROM runoob_tbl&apos;;</span><br><span class="line"></span><br><span class="line">mysql_select_db(&apos;RUNOOB&apos;);</span><br><span class="line">$retval = mysql_query( $sql, $conn );</span><br><span class="line">if(! $retval )</span><br><span class="line">&#123;</span><br><span class="line">  die(&apos;Could not get data: &apos; . mysql_error());</span><br><span class="line">&#125;</span><br><span class="line">while($row = mysql_fetch_array($retval, MYSQL_ASSOC))</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Tutorial ID :&#123;$row[&apos;runoob_id&apos;]&#125;  &lt;br&gt; &quot;.</span><br><span class="line">         &quot;Title: &#123;$row[&apos;runoob_title&apos;]&#125; &lt;br&gt; &quot;.</span><br><span class="line">         &quot;Author: &#123;$row[&apos;runoob_author&apos;]&#125; &lt;br&gt; &quot;.</span><br><span class="line">         &quot;Submission Date : &#123;$row[&apos;submission_date&apos;]&#125; &lt;br&gt; &quot;.</span><br><span class="line">         &quot;--------------------------------&lt;br&gt;&quot;;</span><br><span class="line">&#125; </span><br><span class="line">echo &quot;Fetched data successfully\n&quot;;</span><br><span class="line">mysql_close($conn);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<p><strong>注意</strong>：记住如果你需要在字符串中使用变量，请<strong>将变量置于花括号</strong>。</p>
<p>在上面的例子中，PHP mysql_fetch_array()函数第二个参数为<strong>MYSQL_ASSOC</strong>， 设置该参数查询结果返回<strong>关联数组</strong>，你可以使用字段名称来作为数组的索引。</p>
<p>PHP提供了另外一个函数mysql_fetch_assoc(), 该函数从结果集中取得一行作为关联数组。 返回根据从结果集取得的行生成的关联数组，如果没有更多行，则返回 false。</p>
<h3>内存释放：</h3>

<p>在我们执行完SELECT语句后，释放游标内存是一个很好的习惯。 。可以通过PHP函数<strong>mysql_free_result()</strong>来实现内存的释放。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$dbhost = &apos;localhost:3036&apos;;</span><br><span class="line">$dbuser = &apos;root&apos;;</span><br><span class="line">$dbpass = &apos;rootpassword&apos;;</span><br><span class="line">$conn = mysql_connect($dbhost, $dbuser, $dbpass);</span><br><span class="line">if(! $conn )</span><br><span class="line">&#123;</span><br><span class="line">  die(&apos;Could not connect: &apos; . mysql_error());</span><br><span class="line">&#125;</span><br><span class="line">$sql = &apos;SELECT runoob_id, runoob_title, </span><br><span class="line">               runoob_author, submission_date</span><br><span class="line">        FROM runoob_tbl&apos;;</span><br><span class="line"></span><br><span class="line">mysql_select_db(&apos;RUNOOB&apos;);</span><br><span class="line">$retval = mysql_query( $sql, $conn );</span><br><span class="line">if(! $retval )</span><br><span class="line">&#123;</span><br><span class="line">  die(&apos;Could not get data: &apos; . mysql_error());</span><br><span class="line">&#125;</span><br><span class="line">while($row = mysql_fetch_array($retval, MYSQL_NUM))</span><br><span class="line">&#123;</span><br><span class="line">    echo &quot;Tutorial ID :&#123;$row[0]&#125;  &lt;br&gt; &quot;.</span><br><span class="line">         &quot;Title: &#123;$row[1]&#125; &lt;br&gt; &quot;.</span><br><span class="line">         &quot;Author: &#123;$row[2]&#125; &lt;br&gt; &quot;.</span><br><span class="line">         &quot;Submission Date : &#123;$row[3]&#125; &lt;br&gt; &quot;.</span><br><span class="line">         &quot;--------------------------------&lt;br&gt;&quot;;</span><br><span class="line">&#125;</span><br><span class="line">mysql_free_result($retval);</span><br><span class="line">echo &quot;Fetched data successfully\n&quot;;</span><br><span class="line">mysql_close($conn);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h3>where子句：</h3>

<p>MySQL的WHERE子句的字符串比较是<strong>不区分大小写</strong>的。 你可以使用 <strong>BINARY</strong> 关键字来设定WHERE子句的字符串比较是<strong>区分大小写</strong>的。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT * from runoob_tbl \</span><br><span class="line">          WHERE BINARY runoob_author=&apos;sanjay&apos;;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="MySQL-UPDATE-查询"><a href="#MySQL-UPDATE-查询" class="headerlink" title="MySQL UPDATE 查询"></a>MySQL UPDATE 查询</h2><p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">UPDATE table_name SET field1=new-value1, field2=new-value2</span><br><span class="line">[WHERE Clause]</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="MySQL-LIKE-子句"><a href="#MySQL-LIKE-子句" class="headerlink" title="MySQL LIKE 子句"></a>MySQL LIKE 子句</h2><p>语法：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT field1, field2,...fieldN table_name1, table_name2...</span><br><span class="line">WHERE field1 LIKE condition1 [AND [OR]] filed2 = &apos;somevalue&apos;</span><br></pre></td></tr></table></figure>
<p>SQL LIKE 子句中使用<strong>百分号(%)</strong>字符来表示任意字符，类似于UNIX或正则表达式中的星号 (*)。</p>
<p>将runoob_tbl表中获取runoob_author字段中以”jay”为结尾的的所有记录：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">SELECT * from runoob_tbl </span><br><span class="line">    -&gt; WHERE runoob_author LIKE &apos;%jay&apos;;</span><br></pre></td></tr></table></figure></p>
<hr>
<h2 id="MySQL-排序"><a href="#MySQL-排序" class="headerlink" title="MySQL 排序"></a>MySQL 排序</h2><p>你可以设定<strong>多个字段</strong>来排序。</p>
<p>多个字段的具体排序语法可以自行google。</p>
<hr>
<h2 id="MySQL-GROUP-BY-语句"><a href="#MySQL-GROUP-BY-语句" class="headerlink" title="MySQL GROUP BY 语句"></a>MySQL GROUP BY 语句</h2><p>GROUP BY 语句根据一个或多个列对结果集进行分组。<br>在分组的列上我们可以使用 COUNT, SUM, AVG,等函数。</p>
<p><strong>GROUP BY 语法：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">SELECT column_name, function(column_name)</span><br><span class="line">FROM table_name</span><br><span class="line">WHERE column_name operator value</span><br><span class="line">GROUP BY column_name;</span><br></pre></td></tr></table></figure>
<p>统计总数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT name, COUNT(*) FROM   employee_tbl GROUP BY name;</span><br><span class="line">+--------+----------+</span><br><span class="line">| name   | COUNT(*) |</span><br><span class="line">+--------+----------+</span><br><span class="line">| 小丽 |        1 |</span><br><span class="line">| 小明 |        3 |</span><br><span class="line">| 小王 |        2 |</span><br><span class="line">+--------+----------+</span><br><span class="line">3 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<p><strong>使用 WITH ROLLUP：</strong><br>WITH ROLLUP 可以实现在分组统计数据基础上再进行相同的统计（SUM,AVG,COUNT…）。<br>例如我们将以上的数据表按名字进行分组，再统计每个人登录的次数：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT name, SUM(singin) as singin_count FROM  employee_tbl GROUP BY name WITH ROLLUP;</span><br><span class="line">+--------+--------------+</span><br><span class="line">| name   | singin_count |</span><br><span class="line">+--------+--------------+</span><br><span class="line">| 小丽 |            2 |</span><br><span class="line">| 小明 |            7 |</span><br><span class="line">| 小王 |            7 |</span><br><span class="line">| NULL   |           16 |</span><br><span class="line">+--------+--------------+</span><br><span class="line">4 rows in set (0.00 sec)</span><br></pre></td></tr></table></figure>
<p>其中记录 <strong>NULL</strong> 表示所有人的登录次数。<br>我们可以使用 <strong>coalesce</strong> 来设置一个可以取代 NUll 的名称，coalesce 语法：<code>select coalesce(a,b,c);</code>如果a!=null,则选择a，如果为null，则往下传递，继续判断b。</p>
<p>可以改写上面的：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT coalesce(name, &apos;总数&apos;), SUM(singin) as singin_count FROM  employee_tbl GROUP BY name WITH ROLLUP;</span><br><span class="line">+--------------------------+--------------+</span><br><span class="line">| coalesce(name, &apos;总数&apos;) | singin_count |</span><br><span class="line">+--------------------------+--------------+</span><br><span class="line">| 小丽                   |            2 |</span><br><span class="line">| 小明                   |            7 |</span><br><span class="line">| 小王                   |            7 |</span><br><span class="line">| 总数                   |           16 |</span><br><span class="line">+--------------------------+--------------+</span><br><span class="line">4 rows in set (0.01 sec)</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="Mysql-连接的使用"><a href="#Mysql-连接的使用" class="headerlink" title="Mysql 连接的使用"></a>Mysql 连接的使用</h2><p>真正的应用中经常需要从<strong>多个数据表</strong>中读取数据。<br>介绍如何使用 MySQL 的 JOIN 在两个或多个表中查询数据。</p>
<p>JOIN 按照功能大致分为如下三类：<br>1.<strong>INNER JOIN（内连接,或等值连接）</strong>：获取两个表中字段匹配关系的记录。<br>2.<strong>LEFT JOIN（左连接）</strong>：获取左表所有记录，即使右表没有对应匹配的记录。<br>3.<strong>RIGHT JOIN（右连接）</strong>： 与 LEFT JOIN 相反，用于获取右表所有记录，即使左表没有对应匹配的记录。</p>
<p>下面分别解释：<br>设有两张表，tcount_tbl和runoob_tbl。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">SELECT * FROM tcount_tbl;</span><br><span class="line">+-----------------+----------------+</span><br><span class="line">| runoob_author | runoob_count |</span><br><span class="line">+-----------------+----------------+</span><br><span class="line">| mahran          |             20 |</span><br><span class="line">| mahnaz          |           NULL |</span><br><span class="line">| Jen             |           NULL |</span><br><span class="line">| Gill            |             20 |</span><br><span class="line">| John Poul       |              1 |</span><br><span class="line">| Sanjay          |              1 |</span><br><span class="line">+-----------------+----------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">SELECT * from runoob_tbl;</span><br><span class="line">+-------------+----------------+-----------------+-----------------+</span><br><span class="line">| runoob_id | runoob_title | runoob_author | submission_date |</span><br><span class="line">+-------------+----------------+-----------------+-----------------+</span><br><span class="line">|           1 | Learn PHP      | John Poul       | 2007-05-24      |</span><br><span class="line">|           2 | Learn MySQL    | Abdul S         | 2007-05-24      |</span><br><span class="line">|           3 | JAVA Tutorial  | Sanjay          | 2007-05-06      |</span><br><span class="line">+-------------+----------------+-----------------+-----------------+</span><br></pre></td></tr></table></figure>
<p><strong>inner join:</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a INNER JOIN tcount_tbl b ON a.runoob_author = b.runoob_author;</span><br><span class="line">+-----------+---------------+--------------+</span><br><span class="line">| runoob_id | runoob_author | runoob_count |</span><br><span class="line">+-----------+---------------+--------------+</span><br><span class="line">|         1 | John Poul     |            1 |</span><br><span class="line">|         3 | Sanjay        |            1 |</span><br><span class="line">+-----------+---------------+--------------+</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">等价于：</span><br><span class="line">SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a, tcount_tbl b WHERE a.runoob_author = b.runoob_author;</span><br><span class="line">+-------------+-----------------+----------------+</span><br><span class="line">| runoob_id | runoob_author | runoob_count |</span><br><span class="line">+-------------+-----------------+----------------+</span><br><span class="line">|           1 | John Poul       |              1 |</span><br><span class="line">|           3 | Sanjay          |              1 |</span><br><span class="line">+-------------+-----------------+----------------+</span><br></pre></td></tr></table></figure>
<p>inner join的原理示意图：<br><img src="http://www.runoob.com/wp-content/uploads/2014/03/img_innerjoin.gif" alt=""></p>
<p><strong>left join：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">SELECT a.runoob_id, a.runoob_author, b.runoob_count FROM runoob_tbl a LEFT JOIN tcount_tbl b ON a.runoob_author = b.runoob_author;</span><br><span class="line">+-------------+-----------------+----------------+</span><br><span class="line">| runoob_id | runoob_author | runoob_count |</span><br><span class="line">+-------------+-----------------+----------------+</span><br><span class="line">|           1 | John Poul       |              1 |</span><br><span class="line">|           2 | Abdul S         |           NULL |</span><br><span class="line">|           3 | Sanjay          |              1 |</span><br><span class="line">+-------------+-----------------+----------------+</span><br></pre></td></tr></table></figure>
<p>该语句会读取<strong>左边</strong>的数据表runoob_tbl的<strong>所有选取的字段数据</strong>，即便在右侧表tcount_tbl中没有对应的runoob_author字段值。<br>left join原理示意图：<br><img src="http://www.runoob.com/wp-content/uploads/2014/03/img_leftjoin.gif" alt=""></p>
<p><strong>right join：</strong><br>跟left join相对偶，不再赘述。<br><img src="http://www.runoob.com/wp-content/uploads/2014/03/img_rightjoin.gif" alt=""></p>
<hr>
<h2 id="MySQL-NULL-值处理"><a href="#MySQL-NULL-值处理" class="headerlink" title="MySQL NULL 值处理"></a>MySQL NULL 值处理</h2><p>为了处理NULL这种情况，MySQL提供了三大运算符:<br>1.<strong>IS NULL</strong>: 当列的值是NULL,此运算符返回true。<br>2.<strong>IS NOT NULL</strong>: 当列的值不为NULL, 运算符返回true。<br>3.<strong>&lt;=&gt;</strong>: 比较操作符（不同于=运算符），当比较的的两个值为NULL时返回true。</p>
<p><strong>注意：</strong><br>关于 NULL 的条件比较运算是比较特殊的。你不能使用 = NULL 或 != NULL 在列中查找 NULL 值 。</p>
<p>在MySQL中，NULL值与任何其它值的比较（即使是NULL）永远返回false，即 NULL = NULL 返回false 。</p>
<p>MySQL中处理NULL使用IS NULL和IS NOT NULL运算符。</p>
<hr>
<h2 id="MySQL-正则表达式"><a href="#MySQL-正则表达式" class="headerlink" title="MySQL 正则表达式"></a>MySQL 正则表达式</h2><p>MySQL中使用 <strong>REGEXP</strong> 操作符来进行正则表达式匹配。<br><img src="http://img.blog.csdn.net/20160927143112662" alt=""><br>开始^,结束$。</p>
<hr>
<h2 id="MySQL-事务"><a href="#MySQL-事务" class="headerlink" title="MySQL 事务"></a>MySQL 事务</h2><p>MySQL 事务主要用于处理操作量大，复杂度高的数据。</p>
<p>1.在MySQL中只有使用了<strong>Innodb</strong>数据库引擎的数据库或表才支持事务<br>2.事务处理可以用来维护数据库的完整性，保证成批的SQL语句要么全部执行，要么全部不执行<br>3.事务用来管理insert,update,delete语句</p>
<p>事务是必须满足4个条件（<strong>ACID</strong>）： Atomicity（原子性）、Consistency（稳定性）、Isolation（隔离性）、Durability（可靠性）。</p>
<p>1.<strong>事务的原子性</strong>：一组事务，要么成功；要么撤回。<br>2.<strong>稳定性</strong> ： 有非法数据（外键约束之类），事务撤回。<br>3.<strong>隔离性</strong>：事务独立运行。一个事务处理后的结果，影响了其他事务，那么其他事务会撤回。<strong>事务的100%隔离，需要牺牲速度。</strong><br>4.<strong>可靠性</strong>：软、硬件崩溃后，InnoDB数据表驱动会利用日志文件重构修改。可靠性和高速度不可兼得， innodb_flush_log_at_trx_commit选项 决定什么时候把事务保存到日志里。</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">start transaction  //1.开始一个事务</span><br><span class="line">savepoint 保存点名称  //2.做保存点</span><br><span class="line">//3.自定义一些操作</span><br><span class="line">//4.提交或回滚</span><br></pre></td></tr></table></figure>
<p>PHP使用事务：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;?php</span><br><span class="line">$handler=mysql_connect(&quot;localhost&quot;,&quot;root&quot;,&quot;password&quot;);</span><br><span class="line">mysql_select_db(&quot;task&quot;);</span><br><span class="line">mysql_query(&quot;SET AUTOCOMMIT=0&quot;);//设置为不自动提交，因为MYSQL默认立即执行</span><br><span class="line">mysql_query(&quot;BEGIN&quot;);//开始事务定义</span><br><span class="line">if(!mysql_query(&quot;insert into trans (id) values(&apos;2&apos;)&quot;))</span><br><span class="line">&#123;</span><br><span class="line">mysql_query(&quot;ROLLBACK&quot;);//判断当执行失败时回滚</span><br><span class="line">&#125;</span><br><span class="line">if(!mysql_query(&quot;insert into trans (id) values(&apos;4&apos;)&quot;))</span><br><span class="line">&#123;</span><br><span class="line">mysql_query(&quot;ROLLBACK&quot;);//判断执行失败回滚</span><br><span class="line">&#125;</span><br><span class="line">mysql_query(&quot;COMMIT&quot;);//执行事务</span><br><span class="line">mysql_close($handler);</span><br><span class="line">?&gt;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="MySQL-ALTER命令"><a href="#MySQL-ALTER命令" class="headerlink" title="MySQL ALTER命令"></a>MySQL ALTER命令</h2><p>当我们需要修改<strong>数据表名</strong>或者修改<strong>数据表字段</strong>时，就需要使用到MySQL ALTER命令。</p>
<p><strong>删除，添加或修改表字段：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE testalter_tbl  DROP i;//删除，只剩一个时肯定就不行啦</span><br><span class="line">ALTER TABLE testalter_tbl ADD i INT;//添加，自动加在末尾</span><br><span class="line">//指定位置</span><br><span class="line">ALTER TABLE testalter_tbl ADD i INT FIRST;//开头</span><br><span class="line">ALTER TABLE testalter_tbl ADD i INT AFTER c;//after</span><br><span class="line">//FIRST,AFTER只在ADD命令中才能使用</span><br></pre></td></tr></table></figure>
<p><strong>修改字段类型及名称：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">//使用MODIFY或CHANGE</span><br><span class="line">ALTER TABLE testalter_tbl MODIFY c CHAR(10);//改类型</span><br><span class="line">ALTER TABLE testalter_tbl CHANGE j j INT;//改名字和类型</span><br></pre></td></tr></table></figure>
<p><strong>ALTER TABLE 对 Null 值和默认值的影响：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl </span><br><span class="line">    -&gt; MODIFY j BIGINT NOT NULL DEFAULT 100;</span><br><span class="line">//如果不设置默认值，MySQL会自动设置该字段默认为 NULL。</span><br></pre></td></tr></table></figure>
<p><strong>修改字段默认值：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE testalter_tbl ALTER i SET DEFAULT 1000;</span><br><span class="line">ALTER TABLE testalter_tbl ALTER i DROP DEFAULT;</span><br><span class="line"></span><br><span class="line">//修改数据表类型</span><br><span class="line">ALTER TABLE testalter_tbl TYPE = MYISAM;</span><br></pre></td></tr></table></figure>
<p><strong>修改表名：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ALTER TABLE testalter_tbl RENAME TO alter_tbl;</span><br></pre></td></tr></table></figure>
<hr>
<h2 id="MySQL-索引"><a href="#MySQL-索引" class="headerlink" title="MySQL 索引"></a>MySQL 索引</h2><p>索引分<strong>单列索引</strong>和<strong>组合索引</strong>。单列索引，即一个索引只包含单个列，一个表可以有多个单列索引，但这不是组合索引。组合索引，即一个索包含多个列。</p>
<p>创建索引时，你需要确保该索引是应用在SQL 查询语句的条件(<strong>一般作为 WHERE 子句的条件</strong>)。<br>实际上，索引也是一张表，该表保存了主键与索引字段，并指向实体表的记录。</p>
<p>索引也会有它的<strong>缺点</strong>：虽然索引大大<strong>提高了查询速度</strong>，同时却会<strong>降低更新表的速度</strong>，如对表进行INSERT、UPDATE和DELETE。因为更新表时，MySQL不仅要保存数据，还要保存一下索引文件。建立索引会占用磁盘空间的索引文件。</p>
<h3>普通索引：</h3>

<p>几种创建方式：</p>
<p><strong>创建索引：</strong><code>CREATE INDEX indexName ON mytable(username(length));</code>如果是CHAR，VARCHAR类型，length可以小于字段实际长度；如果是BLOB和TEXT类型，必须指定 length。</p>
<p><strong>修改表结构：</strong><code>ALTER mytable ADD INDEX [indexName] ON (username(length))</code></p>
<p><strong>创建表的时候直接指定：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">CREATE TABLE mytable(  </span><br><span class="line"> </span><br><span class="line">ID INT NOT NULL,   </span><br><span class="line"> </span><br><span class="line">username VARCHAR(16) NOT NULL,  </span><br><span class="line"> </span><br><span class="line">INDEX [indexName] (username(length))  </span><br><span class="line"> </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<p><strong>删除索引的语法：</strong><code>DROP INDEX [indexName] ON mytable;</code></p>
<h3>唯一索引：</h3>

<p>它与前面的普通索引<strong>类似</strong>，不同的就是：<strong>索引列的值必须唯一，但允许有空值</strong>。<strong>如果是组合索引，则列值的组合必须唯一</strong>。<br>几种创建方式：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">//1.创建索引</span><br><span class="line">CREATE UNIQUE INDEX indexName ON mytable(username(length))</span><br><span class="line"></span><br><span class="line">//2.修改表结构</span><br><span class="line">ALTER mytable ADD UNIQUE [indexName] ON (username(length)) </span><br><span class="line"></span><br><span class="line">//3.创建表的时候直接指定</span><br><span class="line">CREATE TABLE mytable(  </span><br><span class="line"> </span><br><span class="line">ID INT NOT NULL,   </span><br><span class="line"> </span><br><span class="line">username VARCHAR(16) NOT NULL,  </span><br><span class="line"> </span><br><span class="line">UNIQUE [indexName] (username(length))  </span><br><span class="line"> </span><br><span class="line">);</span><br></pre></td></tr></table></figure>
<h3>使用ALTER 命令添加和删除索引：</h3><br>有四种方式来添加数据表的索引：<br><br>1.ALTER TABLE tbl_name ADD PRIMARY KEY (column_list): 该语句添加一个<strong>主键</strong>，这意味着索引值必须是唯一的，且不能为NULL。<br><br>2.ALTER TABLE tbl_name ADD UNIQUE index_name (column_list): 这条语句创建索引的值必须是<strong>唯一</strong>的（除了NULL外，NULL可能会出现多次）。<br><br>3.ALTER TABLE tbl_name ADD INDEX index_name (column_list): 添加<strong>普通索引</strong>，索引值可出现多次。<br><br>4.ALTER TABLE tbl_name ADD FULLTEXT index_name (column_list):该语句指定了索引为 FULLTEXT ，用于<strong>全文索引</strong>。<br><br><h3>使用 ALTER 命令添加和删除主键：</h3><br>主键只能作用<strong>于一个列上</strong>，添加主键索引时，你需要确保该主键<strong>默认不为空</strong>（NOT NULL）。<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE testalter_tbl MODIFY i INT NOT NULL;</span><br><span class="line">mysql&gt; ALTER TABLE testalter_tbl ADD PRIMARY KEY (i);</span><br><span class="line">mysql&gt; ALTER TABLE testalter_tbl DROP PRIMARY KEY;//删除</span><br></pre></td></tr></table></figure><br><br>———-<br><br>MySQL 临时表<br>———<br>MySQL 临时表在我们需要保存一些临时数据时是非常有用的。临时表只在当前连接可见，当关闭连接时，Mysql会自动删除表并释放所有空间。<br>语法：<code>CREATE TEMPORARY TABLE SalesSummary</code><br>用 <strong>SHOW TABLES</strong>命令显示数据表列表时，你将无法看到 SalesSummary表。退出当前MySQL会话后，表就会被销毁。<br><br><br>———-<br><br>MySQL 复制表<br>———<br><br>怎样完整的复制表的<strong>结构</strong>和<strong>内容</strong>？步骤：<br>1.使用 SHOW CREATE TABLE 命令获取创建数据表(CREATE TABLE) 语句，该语句包含了原数据表的结构，索引等。<code>SHOW CREATE TABLE runoob_tbl \G;</code><br><br>2.复制以下命令显示的SQL语句，修改数据表名，并执行SQL语句，通过以上命令 将完全的复制数据表结构。<br><br>3.如果你想复制表的内容，你就可以使用 INSERT INTO … SELECT 语句来实现。<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; INSERT INTO clone_tbl (runoob_id,</span><br><span class="line">    -&gt;                        runoob_title,</span><br><span class="line">    -&gt;                        runoob_author,</span><br><span class="line">    -&gt;                        submission_date)</span><br><span class="line">    -&gt; SELECT runoob_id,runoob_title,</span><br><span class="line">    -&gt;        runoob_author,submission_date</span><br><span class="line">    -&gt; FROM runoob_tbl;</span><br></pre></td></tr></table></figure><br><br>———-<br><br>MySQL 序列使用<br>———<br>MySQL序列是一组整数：1, 2, 3, …，由于一张数据表只能有一个字段自增主键， 如果你想实现其他字段也实现自动增加，就可以使用MySQL序列来实现。<br><br><strong>使用AUTO_INCREMENT：</strong><br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE insect</span><br><span class="line">    -&gt; (</span><br><span class="line">    -&gt; id INT UNSIGNED NOT NULL AUTO_INCREMENT,</span><br><span class="line">    -&gt; PRIMARY KEY (id),</span><br><span class="line">    -&gt; name VARCHAR(30) NOT NULL, # type of insect</span><br><span class="line">    -&gt; date DATE NOT NULL, # date collected</span><br><span class="line">    -&gt; origin VARCHAR(30) NOT NULL # where collected</span><br><span class="line">);</span><br></pre></td></tr></table></figure><br><br><strong>重置序列：</strong><br>如果你删除了数据表中的多条记录，并希望对剩下数据的AUTO_INCREMENT列进行重新排列，那么你可以通过删除自增的列，然后重新添加来实现。 不过该操作要非常小心，如果在删除的同时又有新记录添加，有可能会出现数据混乱。操作如下所示：<br><br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER TABLE insect DROP id;</span><br><span class="line">mysql&gt; ALTER TABLE insect</span><br><span class="line">    -&gt; ADD id INT UNSIGNED NOT NULL AUTO_INCREMENT FIRST,</span><br><span class="line">    -&gt; ADD PRIMARY KEY (id);</span><br></pre></td></tr></table></figure><br><br>———-<br><br>MySQL 处理重复数据<br>————<br><br><h3>防止表中出现重复数据</h3>

<p>你可以在MySQL数据表中设置指定的字段为 <strong>PRIMARY KEY（主键）</strong> 或者 <strong>UNIQUE（唯一）</strong> 索引来保证数据的唯一性。</p>
<p>设置主键PRIMARY KEY(COLUMN_LIST)的意思是，以COLUMN_LIST为组合，只有当所有值一样时，才不能插入。它的意思不是COLUMN_LIST中每个都是主键，这是错误的！组合不重复就行。对于UNIQUE INDEX同理。</p>
<p>如果我们设置了唯一索引，那么在插入重复数据时，SQL语句将无法执行成功,并抛出错。</p>
<p><strong>INSERT IGNORE INTO</strong>与<strong>INSERT INTO</strong>的区别就是INSERT IGNORE会忽略数据库中已经存在的数据，如果数据库没有数据，就插入新的数据，如果有数据的话就跳过这条数据。这样就可以保留数据库中已经存在数据，达到在间隙中插入数据的目的。</p>
<p>而<strong>REPLACE INTO</strong>如果存在primary 或 unique相同的记录，则先删除掉。再插入新记录。</p>
<p></p><h3>过滤重复数据</h3><br>如果你需要读取不重复的数据可以在 SELECT 语句中使用 <strong>DISTINCT</strong> 关键字来过滤重复数据。<p></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT DISTINCT last_name, first_name</span><br><span class="line">    -&gt; FROM person_tbl</span><br><span class="line">    -&gt; ORDER BY last_name;</span><br></pre></td></tr></table></figure>
<p>你也可以使用 <strong>GROUP BY</strong> 来读取数据表中不重复的数据：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; SELECT last_name, first_name</span><br><span class="line">    -&gt; FROM person_tbl</span><br><span class="line">    -&gt; GROUP BY (last_name, first_name);</span><br></pre></td></tr></table></figure>
<p></p><h3>删除重复数据</h3><br>如果你想删除数据表中的重复数据，你可以使用以下的SQL语句：<p></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; CREATE TABLE tmp SELECT last_name, first_name, sex</span><br><span class="line">    -&gt;                  FROM person_tbl;</span><br><span class="line">    -&gt;                  GROUP BY (last_name, first_name);</span><br><span class="line">mysql&gt; DROP TABLE person_tbl;</span><br><span class="line">mysql&gt; ALTER TABLE tmp RENAME TO person_tbl;</span><br></pre></td></tr></table></figure>
<p>当然你也可以在数据表中添加 INDEX（索引） 和 PRIMAY KEY（主键）这种简单的方法来删除表中的重复记录。方法如下：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">mysql&gt; ALTER IGNORE TABLE person_tbl</span><br><span class="line">    -&gt; ADD PRIMARY KEY (last_name, first_name);</span><br></pre></td></tr></table></figure>
<p>但是这个方法不适用于5.7及以后的mysql版本。</p>
<hr>
<h2 id="MySQL-及-SQL-注入"><a href="#MySQL-及-SQL-注入" class="headerlink" title="MySQL 及 SQL 注入"></a>MySQL 及 SQL 注入</h2><p>防止SQL注入，我们需要注意以下几个要点：</p>
<p>1.永远不要信任用户的输入。对用户的输入进行校验，可以通过正则表达式，或限制长度；对单引号和 双”-“进行转换等。<br>2.永远不要使用动态拼装sql，可以使用参数化的sql或者直接使用存储过程进行数据查询存取。<br>3.永远不要使用管理员权限的数据库连接，为每个应用使用单独的权限有限的数据库连接。<br>4.不要把机密信息直接存放，加密或者hash掉密码和敏感的信息。<br>5.应用的异常信息应该给出尽可能少的提示，最好使用自定义的错误信息对原始错误信息进行包装<br>6.sql注入的检测方法一般采取辅助软件或网站平台来检测，软件一般采用sql注入检测工具jsky，网站平台就有亿思网站安全平台检测工具。MDCSOFT SCAN等。采用MDCSOFT-IPS可以有效的防御SQL注入，XSS攻击等。</p>
<hr>
<h2 id="MySQL-导出数据"><a href="#MySQL-导出数据" class="headerlink" title="MySQL 导出数据"></a>MySQL 导出数据</h2><p>MySQL中你可以使用<strong>SELECT…INTO OUTFILE</strong>语句来简单的导出数据到<strong>文本文件</strong>上。</p>
<p><strong>导出SQL格式的数据：</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">$ mysqldump -u root -p RUNOOB runoob_tbl &gt; dump.txt</span><br><span class="line">password ******</span><br></pre></td></tr></table></figure>
  
	</div>
		<footer class="article-footer clearfix">
<div class="article-catetags">


  <div class="article-tags">
  
  <span></span> <a href="/tags/后端开发/">后端开发</a>
  </div>

</div>



	<div class="article-share" id="share">
	
	  <div data-url="http://yoursite.com/2016/09/26/mysql学习笔记/" data-title="mysql学习笔记 | 曾先生&#39;s Blog" data-tsina="null" class="share clearfix">
	  </div>
	
	</div>


</footer>

   	       
	</article>
	
<nav class="article-nav clearfix">
 
 <div class="prev" >
 <a href="/2016/09/28/网站相关（协议，RESTful）/" title="网站相关（协议，RESTful）">
  <strong>上一篇：</strong><br/>
  <span>
  网站相关（协议，RESTful）</span>
</a>
</div>


<div class="next">
<a href="/2016/09/22/矫情的实习月记/"  title="矫情的实习月记">
 <strong>下一篇：</strong><br/> 
 <span>矫情的实习月记
</span>
</a>
</div>

</nav>

	
<section id="comments" class="comment">
	<div class="ds-thread" data-thread-key="2016/09/26/mysql学习笔记/" data-title="mysql学习笔记" data-url="http://yoursite.com/2016/09/26/mysql学习笔记/"></div>
</section>


</div>  
      <div class="openaside"><a class="navbutton" href="#" title="Show Sidebar"></a></div>

  <div id="toc" class="toc-aside">
  <strong class="toc-title">Contents</strong>
 
 <ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#概述"><span class="toc-number">1.</span> <span class="toc-text">概述</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.1.</span> <span class="toc-text">数据库：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">1.2.</span> <span class="toc-text">RDBMS（关系型数据库）术语:</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#mysql安装"><span class="toc-number">2.</span> <span class="toc-text">mysql安装</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">2.1.</span> <span class="toc-text">验证Mysql安装：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-管理"><span class="toc-number">3.</span> <span class="toc-text">MySQL 管理</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.1.</span> <span class="toc-text">启动及关闭 MySQL 服务器：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.2.</span> <span class="toc-text">MySQL 用户设置：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">3.3.</span> <span class="toc-text">管理MySQL的命令：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用-PHP-脚本连接-MySQL"><span class="toc-number">4.</span> <span class="toc-text">使用 PHP 脚本连接 MySQL</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-数据类型"><span class="toc-number">5.</span> <span class="toc-text">MySQL 数据类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-创建数据表"><span class="toc-number">6.</span> <span class="toc-text">MySQL 创建数据表</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-插入数据"><span class="toc-number">7.</span> <span class="toc-text">MySQL 插入数据</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-查询数据"><span class="toc-number">8.</span> <span class="toc-text">MySQL 查询数据</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">8.1.</span> <span class="toc-text">内存释放：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">8.2.</span> <span class="toc-text">where子句：</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-UPDATE-查询"><span class="toc-number">9.</span> <span class="toc-text">MySQL UPDATE 查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-LIKE-子句"><span class="toc-number">10.</span> <span class="toc-text">MySQL LIKE 子句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-排序"><span class="toc-number">11.</span> <span class="toc-text">MySQL 排序</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-GROUP-BY-语句"><span class="toc-number">12.</span> <span class="toc-text">MySQL GROUP BY 语句</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Mysql-连接的使用"><span class="toc-number">13.</span> <span class="toc-text">Mysql 连接的使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-NULL-值处理"><span class="toc-number">14.</span> <span class="toc-text">MySQL NULL 值处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-正则表达式"><span class="toc-number">15.</span> <span class="toc-text">MySQL 正则表达式</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-事务"><span class="toc-number">16.</span> <span class="toc-text">MySQL 事务</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-ALTER命令"><span class="toc-number">17.</span> <span class="toc-text">MySQL ALTER命令</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-索引"><span class="toc-number">18.</span> <span class="toc-text">MySQL 索引</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.1.</span> <span class="toc-text">普通索引：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.2.</span> <span class="toc-text">唯一索引：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.3.</span> <span class="toc-text">使用ALTER 命令添加和删除索引：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.4.</span> <span class="toc-text">使用 ALTER 命令添加和删除主键：</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.5.</span> <span class="toc-text">防止表中出现重复数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.6.</span> <span class="toc-text">过滤重复数据</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#undefined"><span class="toc-number">18.7.</span> <span class="toc-text">删除重复数据</span></a></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-及-SQL-注入"><span class="toc-number">19.</span> <span class="toc-text">MySQL 及 SQL 注入</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MySQL-导出数据"><span class="toc-number">20.</span> <span class="toc-text">MySQL 导出数据</span></a></li></ol>
 
  </div>

<div id="asidepart">
<div class="closeaside"><a class="closebutton" href="#" title="Hide Sidebar"></a></div>
<aside class="clearfix">

  

  
  <div class="tagcloudlist">
    <p class="asidetitle">Tag Cloud</p>
    <div class="tagcloudlist clearfix">
       <a href="/tags/Android/" style="font-size: 20px;">Android</a> <a href="/tags/Hexo/" style="font-size: 10px;">Hexo</a> <a href="/tags/Java/" style="font-size: 10px;">Java</a> <a href="/tags/Java编程思想读书笔记/" style="font-size: 17.14px;">Java编程思想读书笔记</a> <a href="/tags/TECH/" style="font-size: 12.86px;">TECH</a> <a href="/tags/后端开发/" style="font-size: 18.57px;">后端开发</a> <a href="/tags/数据结构与算法分析/" style="font-size: 11.43px;">数据结构与算法分析</a> <a href="/tags/机器学习/" style="font-size: 14.29px;">机器学习</a> <a href="/tags/程序人生/" style="font-size: 10px;">程序人生</a> <a href="/tags/程序员修炼之道读书笔记/" style="font-size: 14.29px;">程序员修炼之道读书笔记</a> <a href="/tags/算法4读书笔记/" style="font-size: 15.71px;">算法4读书笔记</a>
    </div>
  </div>


  <div class="linkslist">
  <p class="asidetitle">Links</p>
    <ul>
        
          <li>
            
            	<a href="http://lucida.me/" target="_blank" title="Lucida&#39;s Blog">Lucida&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://hukai.me/" target="_blank" title="Hukai&#39;s Blog">Hukai&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://gank.io/" target="_blank" title="GANK">GANK</a>
            
          </li>
        
          <li>
            
            	<a href="http://stormzhang.com/" target="_blank" title="StormZhang&#39;s Blog">StormZhang&#39;s Blog</a>
            
          </li>
        
          <li>
            
            	<a href="http://www.trinea.cn/" target="_blank" title="Trinea&#39;s Blog">Trinea&#39;s Blog</a>
            
          </li>
        
    </ul>
</div>

  

  <div class="weiboshow">
  <p class="asidetitle">Weibo</p>
    <iframe width="100%" height="119" class="share_self"  frameborder="0" scrolling="no" src="http://widget.weibo.com/weiboshow/index.php?language=&width=0&height=119&fansRow=2&ptype=1&speed=0&skin=9&isTitle=1&noborder=1&isWeibo=0&isFans=0&uid=null&verifier=2766fecb&dpc=1"></iframe>
</div>


</aside>
</div>
    </div>
    <footer><div id="footer" >
	
	<div class="line">
		<span></span>
		<div class="author"></div>
	</div>
	
	
	<section class="info">
		<p> Hello , I&#39;m Zeng Qi , a Android developer , love Java , ML and Big Data . <br/>
			This is my blog , hope you will enjoy it . Let&#39;s make this world a better place .</p>
	</section>
	 
	<div class="social-font" class="clearfix">
		
		<a href="http://weibo.com/18600103348" target="_blank" class="icon-weibo" title="微博"></a>
		
		
		<a href="https://github.com/zengqi-ustb" target="_blank" class="icon-github" title="github"></a>
		
		
		
		
		
		
		
		<a href="http://www.zhihu.com/people/ceng-qi-29" target="_blank" class="icon-zhihu" title="知乎"></a>
		
		
		
		<a href="mailto:zengqiustb@163.com" target="_blank" class="icon-email" title="Email Me"></a>
		
	</div>
			
		

		<p class="copyright">
		© 2016 
		
		<a href="/about" target="_blank" title="曾奇">曾奇</a>
		
		
		</p>
</div>
</footer>
    <script src="/js/jquery-2.0.3.min.js"></script>
<script src="/js/jquery.imagesloaded.min.js"></script>
<script src="/js/gallery.js"></script>
<script src="/js/jquery.qrcode-0.12.0.min.js"></script>

<script type="text/javascript">
$(document).ready(function(){ 
  $('.navbar').click(function(){
    $('header nav').toggleClass('shownav');
  });
  var myWidth = 0;
  function getSize(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
  };
  var m = $('#main'),
      a = $('#asidepart'),
      c = $('.closeaside'),
      o = $('.openaside');
  c.click(function(){
    a.addClass('fadeOut').css('display', 'none');
    o.css('display', 'block').addClass('fadeIn');
    m.addClass('moveMain');
  });
  o.click(function(){
    o.css('display', 'none').removeClass('beforeFadeIn');
    a.css('display', 'block').removeClass('fadeOut').addClass('fadeIn');      
    m.removeClass('moveMain');
  });
  $(window).scroll(function(){
    o.css("top",Math.max(80,260-$(this).scrollTop()));
  });
  
        getSize();
        if (myWidth >= 1024) {
          c.click();
        }
  
  $(window).resize(function(){
    getSize(); 
    if (myWidth >= 1024) {
      $('header nav').removeClass('shownav');
    }else{
      m.removeClass('moveMain');
      a.css('display', 'block').removeClass('fadeOut');
      o.css('display', 'none');
      
      $('#toc.toc-aside').css('display', 'none');
        
    }
  });
});
</script>

<script type="text/javascript">
$(document).ready(function(){ 
  var ai = $('.article-content>iframe'),
      ae = $('.article-content>embed'),
      t  = $('#toc'),
      ta = $('#toc.toc-aside'),
      o  = $('.openaside'),
      c  = $('.closeaside');
  if(ai.length>0){
    ai.wrap('<div class="video-container" />');
  };
  if(ae.length>0){
   ae.wrap('<div class="video-container" />');
  };
  c.click(function(){
    ta.css('display', 'block').addClass('fadeIn');
  });
  o.click(function(){
    ta.css('display', 'none');
  });
  $(window).scroll(function(){
    ta.css("top",Math.max(140,320-$(this).scrollTop()));
  });
});
</script>


<script type="text/javascript">
$(document).ready(function(){ 
  var $this = $('.share'),
      url = $this.attr('data-url'),
      encodedUrl = encodeURIComponent(url),
      title = $this.attr('data-title'),
      tsina = $this.attr('data-tsina'),
      description = $this.attr('description');
  var html = [
  '<div class="hoverqrcode clearfix"></div>',
  '<a class="overlay" id="qrcode"></a>',
  '<a href="https://www.facebook.com/sharer.php?u=' + encodedUrl + '" class="article-share-facebook" target="_blank" title="Facebook"></a>',
  '<a href="https://twitter.com/intent/tweet?url=' + encodedUrl + '" class="article-share-twitter" target="_blank" title="Twitter"></a>',
  '<a href="#qrcode" class="article-share-qrcode" title="微信"></a>',
  '<a href="http://widget.renren.com/dialog/share?resourceUrl=' + encodedUrl + '&srcUrl=' + encodedUrl + '&title=' + title +'" class="article-share-renren" target="_blank" title="人人"></a>',
  '<a href="http://service.weibo.com/share/share.php?title='+title+'&url='+encodedUrl +'&ralateUid='+ tsina +'&searchPic=true&style=number' +'" class="article-share-weibo" target="_blank" title="微博"></a>',
  '<span title="Share to"></span>'
  ].join('');
  $this.append(html);

  $('.hoverqrcode').hide();

  var myWidth = 0;
  function updatehoverqrcode(){
    if( typeof( window.innerWidth ) == 'number' ) {
      myWidth = window.innerWidth;
    } else if( document.documentElement && document.documentElement.clientWidth) {
      myWidth = document.documentElement.clientWidth;
    };
    var qrsize = myWidth > 1024 ? 200:100;
    var options = {render: 'image', size: qrsize, fill: '#2ca6cb', text: url, radius: 0.5, quiet: 1};
    var p = $('.article-share-qrcode').position();
    $('.hoverqrcode').empty().css('width', qrsize).css('height', qrsize)
                          .css('left', p.left-qrsize/2+20).css('top', p.top-qrsize-10)
                          .qrcode(options);
  };
  $(window).resize(function(){
    $('.hoverqrcode').hide();
  });
  $('.article-share-qrcode').click(function(){
    updatehoverqrcode();
    $('.hoverqrcode').toggle();
  });
  $('.article-share-qrcode').hover(function(){}, function(){
      $('.hoverqrcode').hide();
  });
});   
</script>



<script type="text/javascript">
  var duoshuoQuery = {short_name:"zengqi"};
  (function() {
    var ds = document.createElement('script');
    ds.type = 'text/javascript';ds.async = true;
    ds.src = '//static.duoshuo.com/embed.js';
    ds.charset = 'UTF-8';
    (document.getElementsByTagName('head')[0] 
    || document.getElementsByTagName('body')[0]).appendChild(ds);
  })();
</script> 







<link rel="stylesheet" href="/fancybox/jquery.fancybox.css" media="screen" type="text/css">
<script src="/fancybox/jquery.fancybox.pack.js"></script>
<script type="text/javascript">
$(document).ready(function(){ 
  $('.article-content').each(function(i){
    $(this).find('img').each(function(){
      if ($(this).parent().hasClass('fancybox')) return;
      var alt = this.alt;
      if (alt) $(this).after('<span class="caption">' + alt + '</span>');
      $(this).wrap('<a href="' + this.src + '" title="' + alt + '" class="fancybox"></a>');
    });
    $(this).find('.fancybox').each(function(){
      $(this).attr('rel', 'article' + i);
    });
  });
  if($.fancybox){
    $('.fancybox').fancybox();
  }
}); 
</script>



<!-- Analytics Begin -->



<script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "//hm.baidu.com/hm.js?e6d1f421bbc9962127a50488f9ed37d1";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>



<!-- Analytics End -->

<!-- Totop Begin -->

	<div id="totop">
	<a title="Back to Top"><img src="/img/scrollup.png"/></a>
	</div>
	<script src="/js/totop.js"></script>

<!-- Totop End -->

<!-- MathJax Begin -->
<!-- mathjax config similar to math.stackexchange -->


<!-- MathJax End -->

<!-- Tiny_search Begin -->

<!-- Tiny_search End -->

  </body>
</html>
